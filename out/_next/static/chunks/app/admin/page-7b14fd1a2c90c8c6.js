(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{40723:function(e,t,r){Promise.resolve().then(r.bind(r,4856))},4856:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(57437),s=r(2265),l=r(27648),n=r(55775),o=r.n(n),i=r(26022),d=r(74023);let c=o()(()=>Promise.all([r.e(2714),r.e(7921),r.e(5596)]).then(r.bind(r,15596)),{loadableGenerated:{webpack:()=>[15596]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"my-8 p-6 bg-neutral-900 border border-neutral-800 overflow-x-auto",children:(0,a.jsx)("div",{className:"text-slate-500 font-mono text-sm",children:"Loading diagram..."})})}),u={Heading:function(e){let{level:t,children:r}=e;return s.createElement("h".concat(t),{className:"".concat({1:"text-3xl sm:text-4xl font-black mt-10 mb-4",2:"text-2xl sm:text-3xl font-bold mt-8 mb-3",3:"text-xl sm:text-2xl font-semibold mt-6 mb-2",4:"text-lg sm:text-xl font-semibold mt-4 mb-2",5:"text-base font-semibold mt-3 mb-1",6:"text-sm font-semibold mt-3 mb-1"}[t]||""," text-white")},r)},CodeBlock:function(e){let{children:t,language:r}=e;return"mermaid"===r?(0,a.jsx)(c,{chart:t}):(0,a.jsx)("pre",{className:"my-4 p-4 bg-neutral-900 border border-neutral-800 overflow-x-auto font-mono text-sm leading-relaxed",children:(0,a.jsx)("code",{className:r?"language-".concat(r):"",children:t})})},InlineCode:function(e){let{children:t}=e;return(0,a.jsx)("code",{className:"px-1.5 py-0.5 bg-neutral-800 text-rose-300 font-mono text-[0.875em]",children:t})},Paragraph:function(e){let{children:t}=e;return(0,a.jsx)("p",{className:"my-4 text-slate-300 leading-relaxed",children:t})},Link:function(e){let{href:t,children:r}=e;return(0,a.jsx)("a",{href:t,target:t.startsWith("http")?"_blank":void 0,rel:t.startsWith("http")?"noopener noreferrer":void 0,className:"text-rose-400 hover:text-rose-300 underline underline-offset-2 transition-colors",children:r})},BlockQuote:function(e){let{children:t}=e;return(0,a.jsx)("blockquote",{className:"my-4 pl-4 border-l-2 border-rose-700 text-slate-400 italic",children:t})},ListItem:function(e){let{children:t}=e;return(0,a.jsx)("li",{className:"my-1 text-slate-300",children:t})},UnorderedList:function(e){let{children:t}=e;return(0,a.jsx)("ul",{className:"my-4 pl-6 list-disc marker:text-rose-700",children:t})},OrderedList:function(e){let{children:t}=e;return(0,a.jsx)("ol",{className:"my-4 pl-6 list-decimal marker:text-rose-700",children:t})},HorizontalRule:function(){return(0,a.jsx)("hr",{className:"my-8 border-neutral-800"})},Image:function(e){let{src:t,alt:r}=e;return(0,a.jsx)("img",{src:t,alt:r||"",className:"my-6 border border-neutral-800 max-w-full"})},Table:function(e){let{children:t}=e;return(0,a.jsx)("div",{className:"my-6 overflow-x-auto border border-neutral-800",children:(0,a.jsx)("table",{className:"w-full text-left border-collapse",children:t})})},TableHead:function(e){let{children:t}=e;return(0,a.jsx)("thead",{className:"bg-neutral-900 border-b border-neutral-800",children:t})},TableBody:function(e){let{children:t}=e;return(0,a.jsx)("tbody",{className:"divide-y divide-neutral-800",children:t})},TableRow:function(e){let{children:t}=e;return(0,a.jsx)("tr",{className:"transition-colors hover:bg-neutral-900",children:t})},TableHeader:function(e){let{children:t}=e;return(0,a.jsx)("th",{className:"px-4 py-3 text-sm font-semibold text-white tracking-wide",children:t})},TableCell:function(e){let{children:t}=e;return(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-slate-300",children:t})},InteractiveDemo:d.default},m={tags:{interactiveDemo:{render:"InteractiveDemo",attributes:{preset:{type:String}}}},nodes:{heading:{render:"Heading",attributes:{level:{type:String}}},paragraph:{render:"Paragraph"},fence:{render:"CodeBlock",attributes:{language:{type:String},content:{type:String}}},code:{render:"InlineCode"},link:{render:"Link",attributes:{href:{type:String}}},blockquote:{render:"BlockQuote"},item:{render:"ListItem"},list:{render:"UnorderedList",attributes:{ordered:{type:Boolean}},transform(e,t){let r=e.transformAttributes(t),a=e.transformChildren(t);return new i.ZP.Tag(r.ordered?"OrderedList":"UnorderedList",{},a)}},hr:{render:"HorizontalRule"},image:{render:"Image",attributes:{src:{type:String},alt:{type:String}}},table:{render:"Table"},thead:{render:"TableHead"},tbody:{render:"TableBody"},tr:{render:"TableRow"},th:{render:"TableHeader"},td:{render:"TableCell"}}};function x(e){let{content:t}=e;return(0,a.jsx)("div",{className:"prose-custom",children:i.ZP.renderers.react(t,s,{components:u})})}var p=r(40257);let h={slug:"",title:"",excerpt:"",content:"",status:"draft",publishedDate:"",scheduledDate:"",tags:"",categories:"",coverImage:"",coverImageAlt:"",seoMetaTitle:"",seoMetaDescription:"",seoCanonicalUrl:"",seoOgImage:"",seoTwitterCard:"summary_large_image",editorialComments:[]};function b(e){if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.filter(e=>"string"==typeof e):[]}catch(e){return[]}}function g(){let[e,t]=(0,s.useState)(""),[r,n]=(0,s.useState)(p.env.NEXT_PUBLIC_BLOG_API_BASE||"https://portfolio-worker.h-tiwari-dev.workers.dev"),[o,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(""),[g,f]=(0,s.useState)([]),[v,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(!1),[w,C]=(0,s.useState)(""),[k,S]=(0,s.useState)(h),[_,T]=(0,s.useState)("all"),[D,I]=(0,s.useState)(""),[M,O]=(0,s.useState)(""),[L,P]=(0,s.useState)(!0),[E,R]=(0,s.useState)(JSON.stringify(h)),[B,A]=(0,s.useState)(!0),[U,F]=(0,s.useState)(!1),[H,J]=(0,s.useState)(null),[Y,W]=(0,s.useState)([]),[q,z]=(0,s.useState)(!1),[K,G]=(0,s.useState)(!1),[Q,Z]=(0,s.useState)("split"),X=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=localStorage.getItem("blog_worker_base"),r=localStorage.getItem("blog_workflow_token");e&&n(e),r&&t(r)},[]),(0,s.useEffect)(()=>{localStorage.setItem("blog_worker_base",r)},[r]),(0,s.useEffect)(()=>{localStorage.setItem("blog_workflow_token",e)},[e]);let $=(0,s.useMemo)(()=>o.find(e=>e.slug===c)||null,[o,c]),V=(0,s.useMemo)(()=>{let e={draft:0,in_review:0,scheduled:0,published:0,archived:0};for(let t of o)e[t.status]+=1;return e},[o]),ee=(0,s.useMemo)(()=>{let e=D.trim().toLowerCase();return o.filter(t=>("all"===_||t.status===_)&&(!e||t.slug.toLowerCase().includes(e)||t.title.toLowerCase().includes(e)||t.excerpt.toLowerCase().includes(e)))},[o,D,_]),et=(0,s.useMemo)(()=>o.filter(e=>"scheduled"===e.status&&!!e.scheduled_date).sort((e,t)=>(e.scheduled_date||"").localeCompare(t.scheduled_date||"")),[o]),er=(0,s.useMemo)(()=>JSON.stringify(k),[k])!==E,ea=(0,s.useMemo)(()=>{try{return function(e){var t;let r=null!==(t=null==e?void 0:e.node)&&void 0!==t?t:i.ZP.parse("string"==typeof e?e:"");return i.ZP.transform(r,m)}(k.content||"")}catch(e){return null}},[k.content]),es=(0,s.useMemo)(()=>k.content.split(/\s+/).filter(Boolean).length,[k.content]),el=(0,s.useMemo)(()=>Math.max(1,Math.ceil(es/220)),[es]),en=(0,s.useCallback)(async(t,a)=>{let s=r.replace(/\/+$/,""),l=new Headers((null==a?void 0:a.headers)||{});e&&l.set("Authorization","Bearer ".concat(e)),(null==a?void 0:a.body)instanceof FormData||l.get("Content-Type")||l.set("Content-Type","application/json");let n=await fetch("".concat(s).concat(t),{...a,headers:l}),o=await n.text(),i=null;try{i=o?JSON.parse(o):null}catch(e){i={error:o}}if(!n.ok)throw Error((null==i?void 0:i.error)||"Request failed (".concat(n.status,")"));return i},[r,e]),eo=(0,s.useCallback)(e=>{if(!e){S(h),R(JSON.stringify(h));return}let t={slug:e.slug,title:e.title,excerpt:e.excerpt,content:e.content,status:e.status,publishedDate:e.published_date||"",scheduledDate:e.scheduled_date||"",tags:b(e.tags_json).join(", "),categories:b(e.categories_json).join(", "),coverImage:e.cover_image||"",coverImageAlt:e.cover_image_alt||"",seoMetaTitle:e.seo_meta_title||"",seoMetaDescription:e.seo_meta_description||"",seoCanonicalUrl:e.seo_canonical_url||"",seoOgImage:e.seo_og_image||"",seoTwitterCard:e.seo_twitter_card||"summary_large_image",editorialComments:b(e.editorial_comments_json)};S(t),R(JSON.stringify(t))},[]),ei=(0,s.useCallback)(async()=>{if(e){N(!0),y("Loading posts...");try{var t;let e="all"===_?"":"?status=".concat(_),r=await en("/api/blog/posts".concat(e));d(r.posts||[]),y("Loaded ".concat((null===(t=r.posts)||void 0===t?void 0:t.length)||0," posts."))}catch(e){y(e.message)}finally{N(!1)}}},[en,_,e]),ed=(0,s.useCallback)(async e=>{if(e)try{let t=await en("/api/blog/history?slug=".concat(encodeURIComponent(e),"&limit=30"));f(t.history||[])}catch(e){y(e.message)}},[en]),ec=(0,s.useCallback)(async()=>{if(e){z(!0);try{let e=await en("/api/blog/media?limit=100");W(e.files||[])}catch(e){y(e.message)}finally{z(!1)}}},[en,e]);(0,s.useEffect)(()=>{if(!$){eo(null),f([]);return}eo($),C($.scheduled_date||""),ed($.slug)},[eo,ed,$]);let eu=(0,s.useCallback)(()=>({slug:k.slug,title:k.title,excerpt:k.excerpt,content:k.content,status:k.status,publishedDate:k.publishedDate||null,scheduledDate:k.scheduledDate||null,tags:k.tags.split(",").map(e=>e.trim()).filter(Boolean),categories:k.categories.split(",").map(e=>e.trim()).filter(Boolean),coverImage:k.coverImage||null,coverImageAlt:k.coverImageAlt||null,seo:{metaTitle:k.seoMetaTitle||null,metaDescription:k.seoMetaDescription||null,canonicalUrl:k.seoCanonicalUrl||null,ogImage:k.seoOgImage||null,twitterCard:k.seoTwitterCard||null},editorialComments:k.editorialComments,actor:"admin-ui"}),[k]),em=(0,s.useCallback)(async t=>{if(k.slug&&e){(null==t?void 0:t.autosave)?F(!0):(N(!0),y("Saving post..."));try{await en("/api/blog/posts",{method:"POST",body:JSON.stringify(eu())}),await ei(),u(k.slug),R(JSON.stringify(k)),J(new Date().toISOString()),(null==t?void 0:t.autosave)||y("Post saved.")}catch(e){y(e.message)}finally{F(!1),N(!1)}}},[eu,en,k,ei,e]);(0,s.useEffect)(()=>{if(!B||!er||!e||!k.slug||j)return;let t=setTimeout(()=>{em({autosave:!0})},1300);return()=>clearTimeout(t)},[B,k.slug,er,j,em,e]);let ex=(0,s.useCallback)(async(e,t)=>{let r=t||k.slug;if(r){N(!0),y("Running ".concat(e,"..."));try{await en("/api/blog/workflow",{method:"POST",body:JSON.stringify({action:e,slug:r,date:"schedule"===e?w:void 0,actor:"admin-ui"})}),await ei(),u(r),await ed(r),y("Workflow ".concat(e," complete."))}catch(e){y(e.message)}finally{N(!1)}}},[en,k.slug,ed,ei,w]);async function ep(e){if(k.slug&&confirm("Restore revision #".concat(e,"?"))){N(!0),y("Restoring revision ".concat(e,"..."));try{await en("/api/blog/restore",{method:"POST",body:JSON.stringify({slug:k.slug,revisionId:e,actor:"admin-ui"})}),await ei(),u(k.slug),await ed(k.slug),y("Revision restored.")}catch(e){y(e.message)}finally{N(!1)}}}async function eh(){if(k.slug&&confirm('Delete post "'.concat(k.slug,'" permanently?'))){N(!0),y("Deleting post...");try{await en("/api/blog/posts?slug=".concat(encodeURIComponent(k.slug)),{method:"DELETE"}),d(e=>e.filter(e=>e.slug!==k.slug)),u(""),f([]),S(h),R(JSON.stringify(h)),y("Post deleted.")}catch(e){y(e.message)}finally{N(!1)}}}async function eb(t){if(!e)return;let r=Array.from(t);if(0!==r.length){G(!0),y("Uploading ".concat(r.length," file(s)..."));try{for(let e of r){let t=new FormData;t.append("file",e),t.append("folder","blog"),await en("/api/blog/media",{method:"POST",body:t})}await ec(),y("Media uploaded.")}catch(e){y(e.message)}finally{G(!1)}}}async function eg(e){if(confirm("Delete media ".concat(e,"?")))try{await en("/api/blog/media?key=".concat(encodeURIComponent(e)),{method:"DELETE"}),W(t=>t.filter(t=>t.key!==e))}catch(e){y(e.message)}}let ef=(0,s.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=X.current;if(!r)return;let a=r.selectionStart,s=r.selectionEnd,l=k.content.slice(a,s)||"text",n=k.content.slice(0,a)+e+l+t+k.content.slice(s);S(e=>({...e,content:n})),requestAnimationFrame(()=>{r.focus();let s=a+e.length+l.length+t.length;r.setSelectionRange(s,s)})},[k.content]),ev=(0,s.useCallback)(e=>{let t=X.current;if(!t)return;let r=t.selectionStart,a=t.selectionEnd,s=k.content.slice(0,r)+e+k.content.slice(a);S(e=>({...e,content:s})),requestAnimationFrame(()=>{t.focus();let a=r+e.length;t.setSelectionRange(a,a)})},[k.content]),ey=(0,s.useCallback)(e=>{ev("\n".concat(e,"\n"))},[ev]);return(0,a.jsx)("main",{className:"min-h-screen bg-[radial-gradient(circle_at_top,_#172033,_#0a0d14_55%)] text-white p-4 sm:p-6",children:(0,a.jsxs)("div",{className:"max-w-[1700px] mx-auto space-y-4",children:[(0,a.jsx)("header",{className:"border border-slate-800/80 bg-slate-950/80 backdrop-blur p-4 rounded-xl",children:(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Blog Admin Control Room"}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Markdown editor, workflow automation, media upload, and revision control."})]}),(0,a.jsxs)("div",{className:"text-xs text-slate-300",children:[U?"Autosaving...":er?"Unsaved changes":"Saved",H?" \xb7 ".concat(new Date(H).toLocaleTimeString()):""]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-[320px_1fr_360px] gap-4",children:[(0,a.jsxs)("aside",{className:"space-y-4",children:[(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"Connection"}),(0,a.jsx)("input",{value:r,onChange:e=>n(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm",placeholder:"https://<worker>.workers.dev"}),(0,a.jsx)("input",{type:"password",value:e,onChange:e=>t(e.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm",placeholder:"BLOG_WORKFLOW_TOKEN"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("button",{onClick:ei,disabled:j||!e,className:"border border-cyan-800 rounded-md px-3 py-2 text-xs hover:bg-cyan-950",children:"Load posts"}),(0,a.jsx)("button",{onClick:ec,disabled:q||!e,className:"border border-cyan-800 rounded-md px-3 py-2 text-xs hover:bg-cyan-950",children:"Load media"})]}),(0,a.jsx)("p",{className:"text-[11px] text-slate-400",children:v})]}),(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Post Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"border border-slate-800 rounded p-2",children:["Draft: ",V.draft]}),(0,a.jsxs)("div",{className:"border border-slate-800 rounded p-2",children:["Review: ",V.in_review]}),(0,a.jsxs)("div",{className:"border border-slate-800 rounded p-2",children:["Scheduled: ",V.scheduled]}),(0,a.jsxs)("div",{className:"border border-slate-800 rounded p-2",children:["Published: ",V.published]})]})]}),(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"bg-slate-900 border border-slate-700 rounded-md px-2 py-2 text-xs",children:[(0,a.jsx)("option",{value:"all",children:"all"}),(0,a.jsx)("option",{value:"draft",children:"draft"}),(0,a.jsx)("option",{value:"in_review",children:"in_review"}),(0,a.jsx)("option",{value:"scheduled",children:"scheduled"}),(0,a.jsx)("option",{value:"published",children:"published"}),(0,a.jsx)("option",{value:"archived",children:"archived"})]}),(0,a.jsx)("input",{value:D,onChange:e=>I(e.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-xs",placeholder:"search"})]}),(0,a.jsx)("button",{onClick:()=>{u(""),f([]),S(h),R(JSON.stringify(h))},className:"w-full border border-slate-700 rounded-md px-3 py-2 text-xs hover:bg-slate-900",children:"New post"}),(0,a.jsx)("div",{className:"space-y-1 max-h-[45vh] overflow-auto",children:ee.map(e=>(0,a.jsxs)("button",{onClick:()=>u(e.slug),className:"w-full text-left border rounded-md p-2 text-xs ".concat(c===e.slug?"border-cyan-700 bg-cyan-950/40":"border-slate-800 hover:border-slate-700"),children:[(0,a.jsx)("div",{className:"font-mono truncate",children:e.slug}),(0,a.jsx)("div",{className:"text-[10px] uppercase text-slate-500",children:e.status})]},e.slug))})]})]}),(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold",children:"Editor"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,a.jsxs)("label",{className:"flex items-center gap-1 text-slate-400",children:[(0,a.jsx)("input",{type:"checkbox",checked:B,onChange:e=>A(e.target.checked)}),"Autosave"]}),(0,a.jsx)("button",{onClick:()=>Z("edit"),className:"border border-slate-700 rounded px-2 py-1",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>Z("split"),className:"border border-slate-700 rounded px-2 py-1",children:"Split"}),(0,a.jsx)("button",{onClick:()=>Z("preview"),className:"border border-slate-700 rounded px-2 py-1",children:"Preview"}),k.slug&&(0,a.jsx)(l.default,{href:"/blog/".concat(k.slug),target:"_blank",className:"border border-slate-700 rounded px-2 py-1 hover:bg-slate-900",children:"Public URL"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,a.jsx)("input",{value:k.slug,onChange:e=>S({...k,slug:e.target.value.toLowerCase().replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-").replace(/-+/g,"-")}),placeholder:"slug",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsxs)("select",{value:k.status,onChange:e=>S({...k,status:e.target.value}),className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"draft",children:"draft"}),(0,a.jsx)("option",{value:"in_review",children:"in_review"}),(0,a.jsx)("option",{value:"scheduled",children:"scheduled"}),(0,a.jsx)("option",{value:"published",children:"published"}),(0,a.jsx)("option",{value:"archived",children:"archived"})]}),(0,a.jsx)("input",{value:k.title,onChange:e=>S({...k,title:e.target.value}),placeholder:"title",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm md:col-span-2"}),(0,a.jsx)("input",{value:k.tags,onChange:e=>S({...k,tags:e.target.value}),placeholder:"tags comma-separated",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.categories,onChange:e=>S({...k,categories:e.target.value}),placeholder:"categories comma-separated",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.publishedDate,onChange:e=>S({...k,publishedDate:e.target.value}),placeholder:"published YYYY-MM-DD",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.scheduledDate,onChange:e=>S({...k,scheduledDate:e.target.value}),placeholder:"scheduled YYYY-MM-DD",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"})]}),(0,a.jsx)("textarea",{value:k.excerpt,onChange:e=>S({...k,excerpt:e.target.value}),placeholder:"excerpt",className:"w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm h-20"}),(0,a.jsxs)("div",{className:"border border-slate-800 rounded-lg p-2 bg-slate-950/70",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-2",children:[{label:"H1",run:()=>ey("# Heading")},{label:"H2",run:()=>ey("## Section")},{label:"B",run:()=>ef("**","**")},{label:"I",run:()=>ef("*","*")},{label:"Code",run:()=>ef("`","`")},{label:"Quote",run:()=>ey("> Quote")},{label:"UL",run:()=>ey("- Item 1\n- Item 2")},{label:"OL",run:()=>ey("1. Item 1\n2. Item 2")},{label:"Link",run:()=>ef("[","](https://example.com)")},{label:"Image",run:()=>ey("![alt](https://example.com/image.png)")},{label:"Table",run:()=>ey("| Col A | Col B |\n| --- | --- |\n| A | B |")},{label:"Fence",run:()=>ey('```ts\nconsole.log("hello");\n```')},{label:"Demo",run:()=>ey('{% interactiveDemo preset="sorting" /%}')}].map(e=>(0,a.jsx)("button",{onClick:e.run,className:"text-[11px] border border-slate-700 rounded px-2 py-1 hover:bg-slate-900",children:e.label},e.label))}),(0,a.jsxs)("div",{className:"grid gap-2",style:{gridTemplateColumns:"split"===Q?"1fr 1fr":"1fr"},children:["preview"!==Q&&(0,a.jsx)("textarea",{ref:X,value:k.content,onChange:e=>S({...k,content:e.target.value}),onKeyDown:function(e){if(!(e.metaKey||e.ctrlKey))return;let t=e.key.toLowerCase();"b"===t?(e.preventDefault(),ef("**","**")):"i"===t?(e.preventDefault(),ef("*","*")):"k"===t?(e.preventDefault(),ef("[","](https://example.com)")):"s"===t&&(e.preventDefault(),em())},placeholder:"Markdown / Markdoc content",className:"w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm h-[420px] font-mono"}),"edit"!==Q&&(0,a.jsx)("div",{className:"border border-slate-800 rounded-md bg-slate-950 p-3 h-[420px] overflow-auto",children:ea?(0,a.jsx)("article",{className:"prose-custom max-w-none",children:(0,a.jsx)(x,{content:ea})}):(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Preview unavailable for current content."})})]}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500 mt-2",children:[es," words \xb7 ~",el," min read \xb7 Ctrl/Cmd+B/I/K/S shortcuts"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,a.jsx)("input",{value:k.coverImage,onChange:e=>S({...k,coverImage:e.target.value}),placeholder:"cover image URL",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.coverImageAlt,onChange:e=>S({...k,coverImageAlt:e.target.value}),placeholder:"cover image alt",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.seoMetaTitle,onChange:e=>S({...k,seoMetaTitle:e.target.value}),placeholder:"SEO meta title",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.seoCanonicalUrl,onChange:e=>S({...k,seoCanonicalUrl:e.target.value}),placeholder:"SEO canonical URL",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsx)("input",{value:k.seoOgImage,onChange:e=>S({...k,seoOgImage:e.target.value}),placeholder:"SEO OG image URL",className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm"}),(0,a.jsxs)("select",{value:k.seoTwitterCard,onChange:e=>S({...k,seoTwitterCard:e.target.value}),className:"bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"summary_large_image",children:"summary_large_image"}),(0,a.jsx)("option",{value:"summary",children:"summary"})]})]}),(0,a.jsx)("textarea",{value:k.seoMetaDescription,onChange:e=>S({...k,seoMetaDescription:e.target.value}),placeholder:"SEO meta description",className:"w-full bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-sm h-20"}),(0,a.jsxs)("div",{className:"border border-slate-800 rounded-md p-2",children:[(0,a.jsx)("div",{className:"text-xs font-semibold mb-2",children:"Editorial comments"}),(0,a.jsx)("div",{className:"space-y-1 mb-2 max-h-28 overflow-auto",children:k.editorialComments.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2 border border-slate-800 rounded p-2",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300 whitespace-pre-wrap",children:e}),(0,a.jsx)("button",{onClick:()=>S({...k,editorialComments:k.editorialComments.filter((e,r)=>r!==t)}),className:"text-[11px] border border-slate-700 rounded px-1.5 py-0.5 hover:bg-slate-900",children:"Remove"})]},"".concat(e,"-").concat(t)))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{value:M,onChange:e=>O(e.target.value),placeholder:"add comment",className:"flex-1 bg-slate-900 border border-slate-700 rounded-md px-3 py-2 text-xs"}),(0,a.jsx)("button",{onClick:()=>{let e=M.trim();e&&(S({...k,editorialComments:[...k.editorialComments,e]}),O(""))},className:"px-3 py-2 text-xs border border-slate-700 rounded-md hover:bg-slate-900",children:"Add"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,a.jsx)("button",{onClick:()=>em(),disabled:j||!e||!k.slug,className:"px-3 py-2 text-xs border border-cyan-700 rounded-md hover:bg-cyan-950",children:"Save"}),(0,a.jsx)("button",{onClick:()=>ex("publish"),disabled:j||!k.slug,className:"px-3 py-2 text-xs border border-slate-700 rounded-md hover:bg-slate-900",children:"Publish"}),(0,a.jsx)("button",{onClick:()=>ex("archive"),disabled:j||!k.slug,className:"px-3 py-2 text-xs border border-slate-700 rounded-md hover:bg-slate-900",children:"Archive"}),(0,a.jsx)("button",{onClick:()=>ex("unpublish"),disabled:j||!k.slug,className:"px-3 py-2 text-xs border border-slate-700 rounded-md hover:bg-slate-900",children:"Unpublish"}),(0,a.jsx)("input",{value:w,onChange:e=>C(e.target.value),placeholder:"YYYY-MM-DD",className:"px-3 py-2 text-xs border border-slate-700 bg-slate-900 rounded-md"}),(0,a.jsx)("button",{onClick:()=>ex("schedule"),disabled:j||!k.slug||!w,className:"px-3 py-2 text-xs border border-slate-700 rounded-md hover:bg-slate-900",children:"Schedule"}),(0,a.jsx)("button",{onClick:eh,disabled:j||!k.slug,className:"px-3 py-2 text-xs border border-red-900 text-red-300 rounded-md hover:bg-red-950",children:"Delete"})]})]}),(0,a.jsxs)("aside",{className:"space-y-4",children:[(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold",children:"Media Library"}),(0,a.jsx)("button",{onClick:ec,className:"text-[11px] border border-slate-700 rounded px-2 py-1 hover:bg-slate-900",children:"Refresh"})]}),(0,a.jsxs)("label",{className:"block border border-dashed border-slate-700 rounded-md p-3 text-xs text-slate-400 cursor-pointer hover:border-slate-500 mb-2",children:[K?"Uploading...":"Drop/click to upload images",(0,a.jsx)("input",{type:"file",className:"hidden",multiple:!0,accept:"image/*",onChange:e=>{e.target.files&&(eb(e.target.files),e.currentTarget.value="")}})]}),(0,a.jsx)("div",{onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),eb(e.dataTransfer.files)},className:"text-[11px] text-slate-500 mb-2",children:"Drag images here to upload."}),(0,a.jsxs)("div",{className:"space-y-2 max-h-[34vh] overflow-auto",children:[q&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Loading media..."}),Y.map(e=>{var t;return(0,a.jsxs)("div",{className:"border border-slate-800 rounded-md p-2 text-xs",children:[(0,a.jsx)("div",{className:"font-mono truncate",children:e.key}),(0,a.jsx)("div",{className:"text-[11px] text-slate-500 mb-2",children:(t=e.size)<1024?"".concat(t," B"):t<1048576?"".concat((t/1024).toFixed(1)," KB"):"".concat((t/1048576).toFixed(2)," MB")}),(0,a.jsxs)("div",{className:"flex gap-1 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>ev("![".concat(e.key,"](").concat(e.url,")")),className:"text-[11px] border border-slate-700 rounded px-1.5 py-0.5 hover:bg-slate-900",children:"Insert Markdown"}),(0,a.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.url),className:"text-[11px] border border-slate-700 rounded px-1.5 py-0.5 hover:bg-slate-900",children:"Copy URL"}),(0,a.jsx)("button",{onClick:()=>void eg(e.key),className:"text-[11px] border border-red-900 text-red-300 rounded px-1.5 py-0.5 hover:bg-red-950",children:"Delete"})]})]},e.key)})]})]}),(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Scheduled Queue"}),(0,a.jsxs)("div",{className:"space-y-2 max-h-40 overflow-auto",children:[et.map(e=>(0,a.jsxs)("div",{className:"text-xs border border-slate-800 rounded-md p-2",children:[(0,a.jsx)("div",{className:"font-mono truncate",children:e.slug}),(0,a.jsx)("div",{className:"text-[11px] text-slate-500",children:e.scheduled_date}),(0,a.jsx)("button",{onClick:()=>ex("publish",e.slug),className:"mt-1 text-[11px] border border-slate-700 rounded px-2 py-1 hover:bg-slate-900",children:"Publish now"})]},e.slug)),0===et.length&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"No scheduled posts."})]})]}),(0,a.jsxs)("section",{className:"border border-slate-800 bg-slate-950/90 rounded-xl p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Revision History"}),(0,a.jsxs)("div",{className:"space-y-2 max-h-[34vh] overflow-auto",children:[g.map(e=>(0,a.jsxs)("div",{className:"border border-slate-800 rounded-md p-2",children:[(0,a.jsxs)("div",{className:"text-xs font-mono text-slate-300",children:["#",e.id," ",e.revision_type]}),(0,a.jsxs)("div",{className:"text-[11px] text-slate-500",children:[e.actor," \xb7 ",new Date(e.created_at).toLocaleString()]}),(0,a.jsx)("button",{onClick:()=>void ep(e.id),className:"mt-2 text-[11px] border border-cyan-800 rounded px-2 py-1 hover:bg-cyan-950",children:"Restore"})]},e.id)),0===g.length&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"No revisions loaded."})]})]})]})]})]})})}},74023:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var a=r(57437),s=r(2265);function l(e,t,r,a){let s=e>>>0,l=()=>(s=(1664525*s+1013904223)%4294967296)/4294967296;return Array.from({length:t},()=>Math.floor(l()*(a-r+1))+r)}function n(e,t){return"sorting"===e?function(e){let t=[...e],r=[{title:"Initial array",values:[...t],labels:t.map((e,t)=>"#".concat(t+1)),active:[]}];for(let e=0;e<t.length;e++)for(let a=0;a<t.length-e-1;a++)r.push({title:"Compare positions ".concat(a+1," and ").concat(a+2),values:[...t],labels:t.map((e,t)=>"#".concat(t+1)),active:[a,a+1]}),t[a]>t[a+1]&&([t[a],t[a+1]]=[t[a+1],t[a]],r.push({title:"Swap ".concat(a+1," and ").concat(a+2),values:[...t],labels:t.map((e,t)=>"#".concat(t+1)),active:[a,a+1]}));return r.push({title:"Sorted",values:[...t],labels:t.map((e,t)=>"#".concat(t+1)),active:[]}),r}(l(t,8,8,95)):"traversal"===e?function(){let e=["A","B","C","D","E","F"],t=[],r=[];for(let a of[0,1,2,3,4,5])r.push(a),t.push({title:"BFS visit: ".concat(e[a]),values:r.map((e,t)=>t+1).concat(Array.from({length:e.length-r.length},()=>0)),labels:e,active:[...r],highlightPath:[...r]});return t}():"shortest-path"===e?function(){let e=["S","A","B","C","D","T"];return[[0,7,2,0,0,0],[0,5,2,6,0,0],[0,5,2,6,9,0],[0,5,2,6,8,11],[0,5,2,6,8,10]].map((t,r)=>({title:"Dijkstra iteration ".concat(r+1),values:t,labels:e,active:t.map((e,t)=>({v:e,i:t})).filter(e=>e.v>0||0===e.i).map(e=>e.i),highlightPath:[0,2,3,4,5].slice(0,Math.min(r+2,5))}))}():function(e){let t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return[{title:"Weekly baseline",values:e,labels:t,active:[]},{title:"Traffic spike",values:e.map((e,t)=>3===t?e+30:e),labels:t,active:[3]},{title:"Weekend dip",values:e.map((e,t)=>t>4?Math.max(5,e-20):e),labels:t,active:[5,6]}]}(l(t,7,15,80))}function o(e){let{preset:t="sorting"}=e,[r,l]=(0,s.useState)(42),[o,i]=(0,s.useState)(()=>n(t,42)),[d,c]=(0,s.useState)(0),[u,m]=(0,s.useState)(!1),x=o[d],p=(0,s.useMemo)(()=>Math.max(1,...o.flatMap(e=>e.values)),[o]);return(0,s.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{c(e=>e>=o.length-1?(m(!1),e):e+1)},650);return()=>clearInterval(e)},[u,o.length]),(0,a.jsxs)("div",{className:"my-8 border border-neutral-800 bg-neutral-950 p-4 sm:p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-mono uppercase tracking-wider text-slate-400",children:"Interactive Demo"}),(0,a.jsx)("h4",{className:"text-sm sm:text-base text-white font-semibold",children:x.title})]}),(0,a.jsxs)("span",{className:"text-[11px] font-mono text-slate-500",children:["Step ",d+1,"/",o.length]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 mb-4",children:x.values.map((e,t)=>{let r=x.active.includes(t);return(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"h-24 sm:h-28 flex items-end border border-neutral-800 px-2 pb-2 bg-neutral-900",children:(0,a.jsx)("div",{className:"w-full transition-all duration-300 ".concat(r?"bg-rose-500":"bg-slate-500"),style:{height:"".concat(Math.max(8,e/p*100),"%")}})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-[11px] font-mono",children:[(0,a.jsx)("span",{className:r?"text-rose-400":"text-slate-500",children:x.labels[t]}),(0,a.jsx)("span",{className:"text-slate-400",children:e})]})]},"".concat(t,"-").concat(x.labels[t]))})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m(!0),className:"px-3 py-1.5 text-xs font-mono border border-neutral-700 text-slate-200 hover:border-rose-700 hover:text-white transition-colors",children:"Play"}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-3 py-1.5 text-xs font-mono border border-neutral-700 text-slate-200 hover:border-rose-700 hover:text-white transition-colors",children:"Pause"}),(0,a.jsx)("button",{type:"button",onClick:function(){c(e=>Math.min(e+1,o.length-1))},className:"px-3 py-1.5 text-xs font-mono border border-neutral-700 text-slate-200 hover:border-rose-700 hover:text-white transition-colors",children:"Step"}),(0,a.jsx)("button",{type:"button",onClick:function(){m(!1),c(0)},className:"px-3 py-1.5 text-xs font-mono border border-neutral-700 text-slate-200 hover:border-rose-700 hover:text-white transition-colors",children:"Reset"}),(0,a.jsx)("button",{type:"button",onClick:function(){m(!1);let e=(r+137)%1e5;l(e),i(n(t,e)),c(0)},className:"px-3 py-1.5 text-xs font-mono border border-neutral-700 text-slate-200 hover:border-rose-700 hover:text-white transition-colors",children:"Randomize"})]}),(0,a.jsx)("noscript",{children:(0,a.jsx)("p",{className:"mt-3 text-xs text-slate-500",children:"Interactive demo requires JavaScript. Core article content remains available."})})]})}},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(72972),s=r.n(a)},40257:function(e,t,r){"use strict";var a,s;e.exports=(null==(a=r.g.process)?void 0:a.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(44227)},44227:function(e){!function(){var t={229:function(e){var t,r,a,s=e.exports={};function l(){throw Error("setTimeout has not been defined")}function n(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:n}catch(e){r=n}}();var i=[],d=!1,c=-1;function u(){d&&a&&(d=!1,a.length?i=a.concat(i):c=-1,i.length&&m())}function m(){if(!d){var e=o(u);d=!0;for(var t=i.length;t;){for(a=i,i=[];++c<t;)a&&a[c].run();c=-1,t=i.length}a=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new x(e,t)),1!==i.length||d||o(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function a(e){var s=r[e];if(void 0!==s)return s.exports;var l=r[e]={exports:{}},n=!0;try{t[e](l,l.exports,a),n=!1}finally{n&&delete r[e]}return l.exports}a.ab="//";var s=a(229);e.exports=s}()},55775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=r(47043);r(57437),r(2265);let s=a._(r(15602));function l(e,t){var r;let a={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let l={...a,...t};return(0,s.default)({...l,modules:null==(r=l.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81523:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=r(18993);function s(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return r}},15602:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=r(57437),s=r(2265),l=r(81523),n=r(70049);function o(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},r=(0,s.lazy)(()=>t.loader().then(o)),d=t.loading;function c(e){let o=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(n.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(s.Suspense,{fallback:o,children:i})}return c.displayName="LoadableComponent",c}},70049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return l}});let a=r(57437),s=r(20544);function l(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,s.getExpectedRequestStore)("next/dynamic css"),l=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));l.push(...t)}}return 0===l.length?null:(0,a.jsx)(a.Fragment,{children:l.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[2451,2972,2971,2117,1744],function(){return e(e.s=40723)}),_N_E=e.O()}]);